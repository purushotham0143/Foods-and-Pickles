<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishika Home Foods and Pickles</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
  integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./Home.css">
    <style>
        .username{
            display: none;
        }
        .logout{
            display: none;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-red">
        <div class="container-fluid">
            <img src="./navimg.png" alt="Bootstrap" width="30" height="24">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="./Home.html">HOME</a></li>
                    <li class="nav-item"><a class="nav-link" href="./About.html">ABOUT US</a></li>
                    <li class="nav-item"><a class="nav-link" href="./contact.html">CONTACT US</a></li>
                    <li class="nav-item"><a class="nav-link" href="./Review.html">REVIEWS</a></li>
                    <li class="nav-item"><a class="nav-link" href="./Veg-pickles.html">VEG-PICKLES</a></li>
                    <li class="nav-item"><a class="nav-link" href="./Non-vegPickles.html">NONVEG-PICKLES</a></li>
                    <li class="nav-item"><a class="nav-link" href="./sweets.html">SWEETS</a></li>
                    <li class="nav-item"><a class="nav-link" href="./Hots.html">HOT-ITEMS</a></li>
                    <li class="nav-item"><a class="nav-link" href="./cart.html">View cart</a></li>
                </ul>
                <form class="d-flex" role="search">
                    <input id="productSearch" class="form-control me-2" type="search" placeholder="Search for products" aria-label="Search">
                    <button class="btn btn-outline-success  " type="button">Search</button>
                </form>
                <!-- Arrow down/up and dropdown -->
                <i class="fa-solid fa-user"></i>

                <div id="arrowDropdown">
                    <a id="arrowDown" class="nav-link"><i class="fa-solid fa-angle-down"></i></a>
                    <a id="arrowUp" class="nav-link" style="display: none;"><i class="fa-solid fa-angle-up"></i></a>
                    <ul class="dropdown-options">
                        <li class="username"><span class="nav-link"></span></li>
                        <li class="login"><a class="nav-link" href="./login.html">Login</a></li>
                        <li class="signup"><a class="nav-link" href="./signup.html">Signup</a></li>
                        <li class="logout"><form action="/logout"><button>Logout</button></form></li>
                    </ul>
                </div>                
            </div>
        </div>
    </nav>
    

    <div id="dropdownContainer" style="display: none; background-color: #FFC0CB; padding: 10px;">
        <ul style="list-style: none; padding: 0; margin: 0;" class="ulOptions">
            <li class="username" ><span class="nav-link"></span></li>
            <li class="login"><a class="userOptions" href="./login.html">Login</a></li>
            <li class="signup"><a class="userOptions" href="./signup.html">Signup</a></li>
            <li class="logout"><form action="/logout"><button>Logout</button></form></li>
        </ul>
    </div>

    <!-- Ticker/Slider Section -->
    <div class="ticker-wrapper">
        <div class="container">
            <div class="ticker">
                <img src="puru.png"  id="first" alt="No image" width="20px" height="20px" color="white">
                100% Pure and Quality Sweets and Pickles!
            </div>
        </div>
    </div>
    <h3 class="shop" >Veg and Non veg Pickles</h3>
    <div class="product-card">
        <img  class="Logo"  src="./logo.jpeg" alt="No image" style="height: 600px;">
    </div>
    <!-- Product Cards Section -->
     <h3 class="shop" >
        Please contact us if you have any doubts<a href="https://wa.me/919100332016?text=Thanks%20for%20Contacting%20Krishika%20Veg%20and%20Non-veg%20pickles.%20We%20are%20Here%20to%20Clarify%20Your%20Doubts" target="_blank">
            <img src="./whats.jpeg" alt="WhatsApp Icon" style="width: 50px; height: 50px; border-radius: 60%;">
          </a>
     </h3>

     <!-- Price Filter  -->
     <div class="container my-4">
        <h4>Filter by Price</h4>
        <form id="priceFilterForm">
            <label for="minPrice">Min Price:</label>
            <input type="number" id="minPrice" class="form-control d-inline-block w-auto mx-2" placeholder="₹" min="0">
            <label for="maxPrice">Max Price:</label>
            <input type="number" id="maxPrice" class="form-control d-inline-block w-auto mx-2" placeholder="₹" min="0">
            <button type="button" class="btn btn-primary" onclick="applyPriceFilter()">Apply Filter</button>
            <button type="button" class="btn btn-secondary" onclick="resetPriceFilter()">Reset</button>
        </form>
    </div>
    
    <div class="container text-center my-5">
        <div class="row row-cols-1 row-cols-md-3 g-4" id="load">
            <div class="col">
                <div class="product-card">
                    <img src="./Items/checkenbone.jpeg" alt="Chicken Pickle">
                    <div class="product-info">
                        <p>Name: Chicken Pickle(with bone)</p>
                        <div class="product-price">Price Range: ₹300 - ₹1000</div>
                        <a href="./chicken.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/checkenBoneless.jpeg" alt="Chicken Pickle">
                    <div class="product-info">
                        <p>Name:Chicken Boneless Pickle</p>
                        <div class="product-price">Price Range: ₹350 - ₹1300</div>
                        <a href="./checkenBoneless.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/gongurachecken.jpeg" alt="Chicken Pickle">
                    <div class="product-info">
                        <p>Name:Gongura Chicken Pickle(Boneless)</p>
                        <div class="product-price">Price Range: ₹400 - ₹1400</div>
                        <a href="./GonguracheckenBoneless.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/mutton.jpeg" alt="Mutton Pickle">
                    <div class="product-info">
                        <p>Name: Mutton Pickle(Boneless)</p>
                        <div class="product-price">Price Range: ₹700 - ₹2600</div>
                        <a href="./muttonboneless.html" class="btn-buy" class="img-fluid" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/gonguramutton.jpeg" alt="Mutton Pickle">
                    <div class="product-info">
                        <p>Name:Gongura Mutton Pickle</p>
                        <div class="product-price">Price Range: ₹750 - ₹2800</div>
                        <a href="./GonguraMutton.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/prawn.jpeg" alt="Prawn Pickle">
                    <div class="product-info">
                        <p>Name: Prawn Pickle</p>
                        <div class="product-price">Price Range: ₹400 - ₹1600</div>
                        <a href="./prawn.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/gonguraprawns.jpeg" alt="Prawn Pickle">
                    <div class="product-info">
                        <p>Name:Gongura Prawn Pickle</p>
                        <div class="product-price">Price Range: ₹450 - ₹1800</div>
                        <a href="./Gonguraprawn.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/natukodi.jpeg" alt="Prawn Pickle">
                    <div class="product-info">
                        <p>Name: Natu Kodi Pickle</p>
                        <div class="product-price">Price Range: ₹460 - ₹1600</div>
                        <a href="./Natukodi.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/sweetgavalu.jpeg" alt="Sweet Gaavalu">
                    <div class="product-info">
                        <p>Name: Sweet Gaavalu</p>
                        <div class="product-price">Price Range: ₹170 - ₹330</div>
                        <a href="./sweetGaavalu.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/chakkalu.jpeg" alt="Chakkalu">
                    <div class="product-info">
                        <p>Name: Chakkalu</p>
                        <div class="product-price">Price Range: ₹170 - ₹330</div>
                        <a href="./chakkalu.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/ravaladdu.jpeg" alt="Ravaladdu">
                    <div class="product-info">
                        <p>Name: Ravaladdu</p>
                        <div class="product-price">Price Range: ₹170 - ₹330</div>
                        <a href="./ravaladdu.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/sunnuvunda.jpeg" alt="Sunnuvunda">
                    <div class="product-info">
                        <p>Name: Sunnuvunda</p>
                        <div class="product-price">Price Range: ₹170 - ₹330</div>
                        <a href="./sunnuvunda.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/mushroom.jpeg" alt="Mushroom Pickle">
                    <div class="product-info">
                        <p>Name: Mushroom Pickle</p>
                        <div class="product-price">Price Range: ₹170 - ₹330</div>
                        <a href="./mushroom.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="product-card">
                    <img src="./Items/halva.jpeg" alt="Halva">
                    <div class="product-info">
                        <p>Name: Halva</p>
                        <div class="product-price">Price Range: ₹170 - ₹330</div>
                        <a href="./halva.html" class="btn-buy" target="_blank">Buy Now</a>
                        <a href="./Review.html" class="btn-rev" target="_blank">Review</a>
                    </div>
                </div>
            </div>
     <!-- Lazy Loading -->
      
    
            
         

            
               <!-- Up to here  -->
        </div>
        <div>
        
            <button id="many">LoadMore</button>
            <button id="sum">LoadLess</button>
         </div>
        <div class="load row row-cols-1 row-cols-md-3 g-4">
            
        <!-- Veg  -->
        <div class="col">
            <div class="product-card">
                <a href="./Veg-pickles.html" class="image-link">
                    <img style="height: 300px" src="./vegpicklesss.jpg" alt="Halva">
                    <p class="overlay-text">Click Image To get Veg-pickles</p>
                </a>
            </div>
        </div>
        
        <!-- Non-veg  -->
        <div class="col">
            <div class="product-card">
                <a href="./Non-vegPickles.html" class="image-link">
                    <img style="height: 300px" src="./Nonvegpickles.jpg" alt="Halva">
                    <p class="overlay-text">Click Image To get NonVeg-pickles</p>
                </a>
            </div>
        </div>
         <!-- sweets  -->
         <div class="col">
            <div class="product-card">
                <a href="./sweets.html" class="image-link">
                    <img style="height: 300px" src="./sweetssss.avif" alt="Halva">
                    <p class="overlay-text">Click Image To get Sweets</p>
                </a>
            </div>
        </div>   
    </div>      
    </div>
    <!-- founder -->
    <div class="founder">
        <img src="./founder.jpg" alt="Author" class="founder-img">
        <div class="about-author">
            <h2>Founder...!</h2>
            <p>Namaste! I’m Krishika passionate entrepreneur. The journey of creating "Krishika Home Foods and Pickles" began from a deep love for traditional recipes and family. I found myself missing the comforting flavors of homemade meals, especially the pickles my mother used to prepare. One day, I thought—why not share these authentic, homemade flavors with others who might feel the same way? That’s when "Krishika Home Foods and Pickles" came to life. I decided to step away from my career and pour my heart into crafting pickles with the same care and tradition that I grew up with. Before long, our pickles gained a following, inspiring me to dedicate myself entirely to this venture. Now, every jar of "Krishika Home Foods and Pickles" is made with love, ensuring that each bite carries the warmth of home-cooked tradition. Join us, and savor the taste of love and tradition, passed down from my kitchen to yours.
        </div>
    </div><br>
    <!-- Footer Section -->
  <!-- Footer Section -->
  <footer class="text-center text-lg-start text-white">
    <div class="container p-4 pb-0">
        <section class="">
            <div class="row">
                <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 font-weight-bold">Krishika Pickles</h6>
                    <img src="./navimg.png" alt="No image" width="200px" height="200px">
                    <p>Authentic homemade foods and pickles made with love. We bring traditional flavors to your home.</p>
                </div>
                <div  class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 font-weight-bold">Products</h6>
                    <p><a href="#" class="text-white">Pickles</a></p>
                    <p><a href="#" class="text-white">Sweets</a></p>
                    <p><a href="#" class="text-white">Savories</a></p>
                </div>
                <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 font-weight-bold">Contact</h6>
                    <p><i class="fas fa-phone mr-3"></i> +91 9100332016</p>
                    <p><i class="fas fa-phone mr-3">Customer support:</i>7:00Am To 10Pm</p>
                    <p><i class="fas fa-envelope mr-3"></i>krishikapickles@gmail.com</p>
                    <p><i class="fas fa-envelope mr-3"></i>Physical address: Nellore, 524344, AP, India.</p>
                </div>
                <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 font-weight-bold">Follow Us</h6>
                    <a href="https://www.facebook.com/share/3LyxDguBBC3unJNj/?mibextid=qi2Omg" class="text-white me-4"><img src="./facebook.png" alt="Facebook" width="20px"></a>
                    <a href="https://www.instagram.com/krishikahomefoods?igsh=MWlxZWxzZHlhbmd6dQ==" class="text-white me-4"><img src="./Items/Instagram.jpg" alt="Instagram" width="20px"></a>
                    <!-- <a href="#" class="text-white me-4"><img src="./Images/Twitter.png" alt="Twitter" width="20px"></a> -->

                </div>
            </div>
        </section>
    </div>
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
        © 2024 Copyright: Krishika Foods
    </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"  crossorigin="anonymous"></script>

    <script>// Get the search input field and all product cards
        const searchInput = document.getElementById("productSearch");
        const productCards = document.querySelectorAll(".product-card");
        
        // Add an event listener to the search input
        searchInput.addEventListener("input", function () {
            const searchValue = searchInput.value.toLowerCase().trim(); // Get search input, convert to lowercase, and remove extra spaces
        
            productCards.forEach((card) => {
                // Safely get the product name inside each card
                const productNameElement = card.querySelector(".product-info p");
                const productName = productNameElement ? productNameElement.textContent.toLowerCase() : "";
        
                // Show the card if it matches the search input, otherwise hide it
                if (productName.includes(searchValue)) {
                    card.style.display = "block";
                } else {
                    card.style.display = "none";
                }
            });
        });
        
        document.getElementById('many').addEventListener('click', () => {
            let currindex = 0;
            const noitems = 7;
            let products = [];
        
            // Fetch product data
            async function datafetch() {
                try {
                    let response = await fetch('products.json');
                    products = await response.json();
                    console.log(products);
                    loadmore(); // Load initial set of products
                } catch (error) {
                    console.error("Error fetching product data:", error);
                }
            }
        
            // Function to load more products
            function loadmore() {
                let arr = products.slice(currindex, currindex + noitems);
                arr.forEach((ele) => {
                    let newdiv = document.createElement('div');
                    newdiv.innerHTML = `
                     <div class="col">
                        <div class="product-card">
                            <img src="${ele.image}" alt="No image" height="100px" width="100px">
                            <div class="product-info">
                                <p>Name: ${ele.name}</p>
                                <div class="product-price">Price Range: ${ele.priceRange}</div>
                                <a href="${ele.buyLink}" class="btn-buy" target="_blank">Buy Now</a>
                                <a href="${ele.reviewLink}" class="btn-rev" target="_blank">Review</a>
                            </div>
                        </div>
                    </div>
                    `;
                    document.getElementById('load').appendChild(newdiv);
                });
        
                currindex += noitems; // Update index after loading
        
                // Disable "Load More" button if all products are loaded
                if (currindex >= products.length) {
                    document.getElementById('many').disabled = true;
                }
            }
        
            // Functionality for "Show Less" button
            document.getElementById('sum').addEventListener('click', () => {
                if (currindex >noitems) {
                    currindex -= noitems; // Move index back
                } else {
                    currindex = 0; // Reset to the beginning
                }
        
                // Clear and reload products
                document.getElementById('load').innerHTML = ''; 
                datafetch();
            });
        
            // Load more products on button click
            document.getElementById('many').addEventListener('click', () => {
                if (currindex < products.length) {
                    loadmore();
                } else {
                    alert("No more products to display");
                }
            });
        
            // Initial data fetch
            datafetch();
        });


        function applyPriceFilter() {
            const minPrice = parseInt(document.getElementById('minPrice').value);
            const maxPrice = parseInt(document.getElementById('maxPrice').value);
        
            // Handle cases where either field is empty
            if (isNaN(minPrice) && isNaN(maxPrice)) {
                alert('Please enter a valid price range!');
                return;
            }
        
            document.querySelectorAll('.product-card').forEach(card => {
                const priceElement = card.querySelector('.product-price');
                if (!priceElement) {
                    console.error("Price element not found for a product card:", card);
                    card.style.display = 'none'; // Hide product if price information is missing
                    return;
                }
        
                const priceText = priceElement.textContent.trim();
                const priceRange = priceText.match(/\d+/g)?.map(Number); // Extract price range safely
        
                if (!priceRange || priceRange.length !== 2) {
                    console.error(`Invalid price format: ${priceText}`);
                    card.style.display = 'none'; // Hide product with invalid price format
                    return;
                }
        
                const [minProductPrice, maxProductPrice] = priceRange;
        
                // Determine visibility based on filter criteria
                if ((!isNaN(minPrice) && maxProductPrice < minPrice) || 
                    (!isNaN(maxPrice) && minProductPrice > maxPrice)) {
                    card.style.display = 'none';
                } else {
                    card.style.display = 'block';
                }
            });
        }
        
        
        function resetPriceFilter() {
            document.getElementById('minPrice').value = '';
            document.getElementById('maxPrice').value = '';
            document.querySelectorAll('.product-card').forEach(card => {
                card.style.display = 'block';
            });
        }


        //User Login code 
        const arrowDown = document.getElementById('arrowDown');
        const arrowUp = document.getElementById('arrowUp');
        const dropdownContainer = document.getElementById("dropdownContainer");

        // Show dropdown options and toggle arrows
        document.addEventListener('DOMContentLoaded',() => {

            fetch('/userLogin',{
                method : "GET",
                credentials : "include",
                headers : {'Content-Type' : "application/json"}
            })
            .then(response => response.json())
            .then(data => {
                if (data.loginSuccess === true) {

                    localStorage.setItem("isLoggedIn",true);

                    console.log("Hfhuhfuhdhffhhjhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh");

                    // Display the username
                    const usernameElements = document.querySelectorAll('.username');
                    console.log("x = ", usernameElements);
                    
                    usernameElements.forEach((usernameElement) => {
                        usernameElement.style.display = 'block';
                        const spanElement = usernameElement.querySelector('span');
                        if (spanElement) {
                            spanElement.textContent = `Hello, ${data.username}`;
                        }
                        console.log(spanElement?.textContent); // Use optional chaining to avoid errors if spanElement is null
                    });
                    
                    // Hide elements with "login" and "signup" classes
                    document.querySelectorAll('.login').forEach((element) => {
                        element.style.display = 'none';
                    });
                    
                    document.querySelectorAll('.signup').forEach((element) => {
                        element.style.display = 'none';
                    });
                    
                    // Show elements with "logout" class
                    document.querySelectorAll('.logout').forEach((element) => {
                        element.style.display = 'block';
                    });
                    
                }
            })
            .catch(error => {
                console.error('Error fetching username:', error);
            });

        
            // Toggle dropdown on arrow click
            document.getElementById('arrowDown').addEventListener('click', () => {
                document.getElementById('dropdownContainer').style.display = 'block';
                document.getElementById('arrowDown').style.display = 'none';
                document.getElementById('arrowUp').style.display = 'block';
            });
        
            document.getElementById('arrowUp').addEventListener('click', () => {
                document.getElementById('dropdownContainer').style.display = 'none';
                document.getElementById('arrowUp').style.display = 'none';
                document.getElementById('arrowDown').style.display = 'block';
            });
        });
    </script>
</body>
</html>